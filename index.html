<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Christmas Tree for C√∫n</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #010205;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        /* ===== SAO NH·∫§P NH√ÅY ===== */
        .star {
            position: fixed;
            width: 2px; height: 2px;
            background: white;
            border-radius: 50%;
            opacity: 0.8;
            z-index: 0;
            animation: twinkle 2s infinite ease-in-out;
            pointer-events: none;
        }
        @keyframes twinkle {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 1; transform: scale(1.2); }
        }

        /* ===== TUY·∫æT R∆†I (K√çCH TH∆Ø·ªöC NH·ªé) ===== */
        .snowflake {
            position: fixed;
            top: -20px;
            color: white;
            pointer-events: none;
            z-index: 1000;
            animation: fall linear forwards;
            opacity: 0.6;
        }
        @keyframes fall {
            to { transform: translateY(110vh); }
        }

        /* ===== D√íNG CH·ªÆ D∆Ø·ªöI ƒê√ÅY ===== */
        #overlay {
            position: absolute;
            bottom: 50px;
            width: 100%;
            text-align: center;
            color: #ffd700;
            letter-spacing: 4px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
            z-index: 15;
            cursor: pointer;
        }

        /* ===== L√Å TH∆Ø CH√çNH ===== */
        #letter {
            z-index: 9999;
            display: none;
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, #fffdf5, #ffeecb);
            padding: 32px;
            width: 320px;
            border-radius: 24px;
            border: 2px solid #eadc8d;
            box-shadow: 0 0 30px rgba(255, 241, 159, 0.8), 0 0 60px rgba(255, 215, 0, 0.3);
            text-align: center;
            animation: letterIn 0.7s cubic-bezier(.17, .89, .32, 1.49);
        }
        @keyframes letterIn {
            from { transform: translate(-50%, -20%) scale(0.5); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }

        /* ===== H·ªòP QU√Ä (THEO G·ª¢I √ù) ===== */
        .gifts {
            position: fixed;
            bottom: 8vh;
            width: 100%;
            z-index: 8;
            pointer-events: none;
        }
        .gift {
            position: absolute;
            font-size: 48px;
            cursor: pointer;
            pointer-events: auto;
            transition: transform 0.3s ease;
            filter: drop-shadow(0 5px 10px rgba(0,0,0,0.4));
            user-select: none;
        }
        .gift:hover {
            transform: scale(1.2) rotate(-5deg);
        }
        .g1 { left: 15%; transform: rotate(-8deg); }
        .g2 { left: 30%; transform: rotate(6deg); }
        .g3 { left: 50%; transform: rotate(-4deg); }
        .g4 { left: 65%; transform: rotate(10deg); }
        .g5 { left: 80%; transform: rotate(-6deg); }

        /* ===== POPUP QU√Ä (THEO G·ª¢I √ù) ===== */
        #giftPopup {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.8);
            z-index: 10000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }
        .gift-box {
            background: linear-gradient(145deg, #fffdf5, #ffeecb);
            padding: 20px;
            width: 320px;
            border-radius: 18px;
            border: 2px solid gold;
            text-align: center;
            animation: popUp 0.5s ease;
            position: relative;
        }
        @keyframes popUp {
            from { transform: scale(0.7); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }
        .gift-box img {
            width: 100%;
            border-radius: 12px;
            margin-bottom: 15px;
            border: 2px solid #fff;
        }
        .gift-box p {
            font-style: italic;
            color: #333;
            line-height: 1.5;
            margin: 10px 0;
        }
        .gift-box button {
            margin-top: 10px;
            padding: 8px 20px;
            border-radius: 20px;
            border: none;
            background: gold;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .close-btn {
            position: absolute;
            top: 10px; right: 15px;
            background: none; border: none;
            font-size: 1.5rem; color: #999; cursor: pointer;
        }

        #modal-backdrop {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            display: none;
            z-index: 9998;
            backdrop-filter: blur(5px);
        }
    </style>
</head>
<body>

    <div id="modal-backdrop"></div>
    
    <!-- L√Å TH∆Ø CH√çNH -->
    <div id="letter">
        <button id="closeLetterBtn" class="close-btn">&times;</button>
        <div style="display: flex; justify-content: space-between; font-size: 1.5rem;"></div>
        <p style="font-family: 'Georgia', serif; font-size: 1.8rem; font-weight: bold; color: #d42424; margin: 10px 0;">Merry Christmas</p>
        <p style="font-size: 1rem; color: #4a3b2a; font-style: italic; line-height: 1.6;">
            Ch√∫c C√∫n gi√°ng sinh an l√†nh, h·∫°nh ph√∫c, lu√¥n n·ªü n·ª• c∆∞·ªùi, v√† k√®m theo nh·ªØng ƒëi·ªÅu may m·∫Øn, t·ªët ƒë·∫πp s·∫Ω ƒë·∫øn v·ªõi em nhaa. ‚ú®
        </p>
        <p style="font-weight: bold; color: #d42424; margin-top: 10px;">Love uuuu ‚ù§Ô∏è</p>
    </div>

    <!-- H·ªòP QU√Ä -->
    <div class="gifts">
        <div class="gift g1" onclick="openGift(1)">üéÅ</div>
        <div class="gift g2" onclick="openGift(2)">üéÅ</div>
        <div class="gift g3" onclick="openGift(3)">üéÅ</div>
        <div class="gift g4" onclick="openGift(4)">üéÅ</div>
        <div class="gift g5" onclick="openGift(5)">üéÅ</div>
    </div>

    <!-- POPUP QU√Ä -->
    <div id="giftPopup">
        <div class="gift-box">
            <button class="close-btn" onclick="closeGift()">&times;</button>
            <img id="giftImg" src="" alt="Gift Image">
            <p id="giftText"></p>
            <button onclick="closeGift()">ƒê√≥ng</button>
        </div>
    </div>

    <div id="overlay">
        <h2>MERRY CHRISTMAS ‚úâÔ∏è</h2>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <script>
        // DATA QU√Ä T·∫∂NG
        const giftsData = {
            1: { img: "image/gift6.jpg", text: "hi bro, code h√¥ng x·ªãn s√≤ cho l·∫Øm nh∆∞ng m√† iu em. h·∫π h·∫π " },
            2: { img: "image/gift2.jpg", text: "aaaaaa ngiu ai ƒë√¢y m√† xinh th√© nh·ªâiiii üíñ" },
            3: { img: "image/gift3.jpg", text: "gi√® mong ƒë·ª£i ƒëi·ªÅu g√¨ ·ªü ƒë√¢y √°?? ko c√≥ g√¨ h·∫øt, l√™u l√™u" },
            4: { img: "image/gift4.jpg", text: "th·∫£ tim n√® ‚ù§Ô∏è kkk" },
            5: { img: "image/gift5.jpg", text: "·ªèooooooooo ƒë·∫πp ƒë√¥i th·∫ø n√†yy" }
        };
        function openGift(id) {
            const data = giftsData[id];
            document.getElementById('giftImg').src = data.img;
            document.getElementById('giftText').innerText = data.text;
            document.getElementById('giftPopup').style.display = 'flex';
        }

        function closeGift() {
            document.getElementById('giftPopup').style.display = 'none';
        }

        // T·∫†O SAO & TUY·∫æT
        function initStars() {
            for (let i = 0; i < 80; i++) {
                const star = document.createElement("div");
                star.className = "star";
                star.style.left = Math.random() * window.innerWidth + "px";
                star.style.top = Math.random() * window.innerHeight + "px";
                star.style.animationDelay = Math.random() * 2 + "s";
                document.body.appendChild(star);
            }
        }

        function createSnowflake() {
            const snow = document.createElement("div");
            snow.className = "snowflake";
            snow.textContent = "‚ùÑ";
            snow.style.left = Math.random() * window.innerWidth + "px";
            snow.style.fontSize = Math.random() * 6 + 5 + "px"; // K√≠ch th∆∞·ªõc nh·ªè (gi·∫£m 1/2)
            snow.style.animationDuration = Math.random() * 5 + 5 + "s";
            document.body.appendChild(snow);
            setTimeout(() => snow.remove(), 8000);
        }
        setInterval(createSnowflake, 200);

        // L√Å TH∆Ø CH√çNH
        const overlay = document.getElementById('overlay');
        const letter = document.getElementById('letter');
        const backdrop = document.getElementById('modal-backdrop');
        const closeLetterBtn = document.getElementById('closeLetterBtn');

        overlay.onclick = () => { letter.style.display = 'block'; backdrop.style.display = 'block'; };
        closeLetterBtn.onclick = () => { letter.style.display = 'none'; backdrop.style.display = 'none'; };
        backdrop.onclick = () => { letter.style.display = 'none'; backdrop.style.display = 'none'; };

        // THREE.JS C√ÇY TH√îNG
        let scene, camera, renderer, spiralPoints, starTop;
        let mouseX = 0, mouseY = 0;
        let drawProgress = 0;

        function initTree() {
            scene = new THREE.Scene();
            scene.fog = new THREE.FogExp2(0x010205, 0.0006);
            camera = new THREE.PerspectiveCamera(60, window.innerWidth/window.innerHeight, 1, 5000);
            camera.position.set(0, 200, 1100);

            const totalPoints = 25000;
            const treeHeight = 750;
            const baseRadius = 300;
            const geometry = new THREE.BufferGeometry();
            const positions = [];
            const colors = [];

            for (let i = 0; i < totalPoints; i++) {
                const ratio = i / totalPoints;
                const angle = ratio * Math.PI * 2 * 25;
                const y = (ratio * treeHeight) - (treeHeight / 2);
                const radius = baseRadius * (1 - ratio);
                positions.push(Math.cos(angle)*radius + (Math.random()-0.5)*25, y, Math.sin(angle)*radius + (Math.random()-0.5)*25);
                
                const color = new THREE.Color();
                const rand = Math.random();
                if (rand > 0.8) color.setHex(0xfff5e6);
                else if (rand > 0.4) color.setHex(0xffd700);
                else color.setHex(0x228b22);
                colors.push(color.r, color.g, color.b);
            }

            geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
            geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
            geometry.setDrawRange(0, 0);

            spiralPoints = new THREE.Points(geometry, new THREE.PointsMaterial({size: 3, vertexColors: true, transparent: true, opacity: 0.8, blending: THREE.AdditiveBlending}));
            scene.add(spiralPoints);

            // Ng√¥i sao ƒë·ªânh
            const starGeom = new THREE.BufferGeometry();
            const starPos = [];
            for (let i = 0; i < 1200; i++) {
                const angle = Math.random() * Math.PI * 2;
                const r = (Math.floor((angle * 5) / (Math.PI * 2) * 2) % 2 === 0) ? 65 : 20;
                starPos.push(Math.cos(angle)*r*Math.random(), (treeHeight/2)+50 + Math.sin(angle)*r*Math.random(), (Math.random()-0.5)*20);
            }
            starGeom.setAttribute('position', new THREE.Float32BufferAttribute(starPos, 3));
            starTop = new THREE.Points(starGeom, new THREE.PointsMaterial({color: 0xffff00, size: 2, transparent: true, opacity: 0, blending: THREE.AdditiveBlending}));
            scene.add(starTop);

            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setPixelRatio(window.devicePixelRatio);
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            window.onresize = () => {
                camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            };
            document.onmousemove = (e) => { mouseX = e.clientX - window.innerWidth/2; mouseY = e.clientY - window.innerHeight/2; };
        }

        function animate() {
            requestAnimationFrame(animate);
            if (drawProgress < 1) {
                drawProgress += 0.0025; // T·ªëc ƒë·ªô v·∫Ω 
                spiralPoints.geometry.setDrawRange(0, Math.floor(drawProgress * 25000));
            } else {
                if (starTop.material.opacity < 1) starTop.material.opacity += 0.02;
            }
            spiralPoints.rotation.y += 0.005;
            starTop.rotation.y += 0.01;
            camera.position.x += (mouseX * 0.5 - camera.position.x) * 0.05;
            camera.position.y += (-mouseY * 0.5 - camera.position.y) * 0.05;
            camera.lookAt(0, 0, 0);
            renderer.render(scene, camera);
        }

        initStars();
        initTree();
        animate();
    </script>
</body>
</html>




